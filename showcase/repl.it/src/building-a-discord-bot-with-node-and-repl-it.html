<!DOCTYPE html>
<html lang="en">
<head>
<link rel='canonical' href='https://www.codementor.io/@garethdwyer/building-a-discord-bot-with-node-js-and-repl-it-mm46r1u8y'>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Building a Discord bot with Node.js and Repl.it</title>
<style>
@import url(//cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.css);
/* normalize.css v2.1.1 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address styling not present in IE 8/9. */
[hidden] { display: none; }

/* ========================================================================== Base ========================================================================== */
/** 1. Prevent system color scheme's background color being used in Firefox, IE, and Opera. 2. Prevent system color scheme's text color being used in Firefox, IE, and Opera. 3. Set default font family to sans-serif. 4. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { background: #fff; /* 1 */ color: #000; /* 2 */ font-family: sans-serif; /* 3 */ -ms-text-size-adjust: 100%; /* 4 */ -webkit-text-size-adjust: 100%; /* 4 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

a:focus { outline: none; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #111111; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #ad141e; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #ad141e; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.5; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Helvetica Neue", "Helvetica", Arial, sans-serif; font-weight: normal; font-style: normal; color: #111111; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #5e5e5e; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: "Andale Mono", "monotype.com", "Lucida Console", monospace; font-weight: normal; color: #222222; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.5; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }

blockquote, blockquote p { line-height: 1.5; color: #6f6f6f; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only { display: none !important; }

@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; /* h5bp.com/t */ }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.2; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; padding: 2px; white-space: nowrap; background-color: #eeeeee; border: 0 solid #dddddd; -webkit-border-radius: 0; border-radius: 0; text-shadow: none; }

pre, pre > code { line-height: 1.5; color: white; font-family: Monaco, Consolas, "Courier New", Courier, Sans-serif; font-weight: normal; }

kbd.keyseq { color: #555555; }

kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

kbd kbd:first-child { margin-left: 0; }

kbd kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #090909; }

p a > code:hover { color: #151515; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }

#toc { border-bottom: 1px solid #dddddd; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }

#toctitle { color: #111111; }

@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #dddddd; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }

#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", sans-serif; font-size: 1em; padding-left: 0.125em; }

#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.35; }

.sect1 { padding-bottom: 1.25em; }

.sect1 + .sect1 { border-top: 1px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #111111; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #040404; }

.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }

.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }

.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #111111; margin-top: 0; line-height: 1.5; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock > .content pre, .listingblock > .content pre { background: #333333; border-width: 0; padding: 10px; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }

.listingblock > .content { position: relative; }

.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }

.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }

table.pyhltable { border: 0; margin-bottom: 0; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }

.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }

table thead th, table tfoot th { font-weight: bold; }

table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 0; border-radius: 0; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }

table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }

table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }

table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }

th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }

th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }

th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }

th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }

th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }

th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }

p.tableblock.header { color: #222222; font-weight: bold; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1 { padding-right: .8em; font-weight: bold; }

td.hdlist1, td.hdlist2 { vertical-align: top; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.qanda > ol > li > p > em:only-child { color: #96111a; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }

.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #ad141e; color: #820f16; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }

</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_building_a_discord_bot_with_node_js_and_repl_it">Building a Discord bot with Node.js and Repl.it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this tutorial, we’ll use <a href="https://repl.it">repl.it</a> and Node.js to
build a Discord Chatbot. The bot will be able to join a Discord server
and respond to messages sent by people.</p>
</div>
<div class="paragraph">
<p>If you don’t like JavaScript, there’s also a
<a href="https://www.codementor.io/garethdwyer/building-a-discord-bot-with-python-and-repl-it-miblcwejz">Python
version of this tutorial</a>.</p>
</div>
<div class="paragraph">
<p>You’ll find it easier to follow along if you have some JavaScript
knowledge and you should have used Discord or a similar app such as
Skype or Telegram before. We won’t be covering the very basics of
Node.js, but we will explain each line of code in detail, so if you have
any experience with programming, you should be able to follow along.</p>
</div>
<div class="sect2">
<h3 id="_setting_up">Setting up</h3>
<div class="paragraph">
<p>We’ll be doing all of our coding through the Repl.it web IDE and hosting
our bot with Repl.it as well, so you won’t need to install any
additional software on your machine.</p>
</div>
<div class="paragraph">
<p>For set up, we’ll be walking through the following steps. Skip any that
don’t apply to you (e.g. if you already have a Discord account, you can
skip that section).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creating an account on <a href="https://repl.it">Repl.it</a>.</p>
</li>
<li>
<p>Creating an account on <a href="https://discordapp.com/">Discord</a>.</p>
</li>
<li>
<p>Creating an application and a bot user in your Discord account</p>
</li>
<li>
<p>Creating a server on Discord</p>
</li>
<li>
<p>Adding our bot to our Discord server</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let’s get through these admin steps first and then we can get to the fun
part of coding our bot.</p>
</div>
<div class="sect3">
<h4 id="_creating_an_account_on_repl_it">Creating an account on Repl.it</h4>
<div class="paragraph">
<p>Repl.it is an online IDE <em>and</em> compute provider. Traditionally, you
would write code locally on your machine, and then have to &#8220;deploy&#8221;
the code to a server, so that other people on the internet could
interact with it. Repl.it removes one of these steps by combining the
two – you can write your code directly through the Repl.it interface and
it will automatically be deployed to the public internet.</p>
</div>
<div class="paragraph">
<p>Visit <a href="https://repl.it">Repl.it</a> in your web browser and hit the &#8220;Sign
up&#8221; button.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://i.imgur.com/mc9Jzm7.png" alt="Repl.it sign up button"></span> <strong>Image 1:
Signing up for Repl</strong></p>
</div>
<div class="paragraph">
<p>After signing up, press &#8220;Start coding now&#8221; and choose &#8220;Node.js&#8221; from
the list of available languages.</p>
</div>
<div class="paragraph">
<p>Play around with the interface a bit to see how easy it is to write and
run code. We’ll be coming back to this interface soon after we’ve done
some of the Discord set up.</p>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_bot_in_discord_and_getting_a_token">Creating a bot in Discord and getting a token</h4>
<div class="paragraph">
<p>If you’re reading this tutorial, you probably have at least heard of
Discord and likely have an existing account. If not, Discord is a VoIP
and Chat application that is designed to replace Skype for gamers. You
can sign up for a free account over at
<a href="https://discordapp.com/register">the Discord register page</a>, and download
one of their desktop or mobile applications from
<a href="https://discordapp.com/">the Discord homepage</a>.</p>
</div>
<div class="paragraph">
<p>Once you have an account, you’ll want to create a Discord application.
Visit <a href="https://discordapp.com/developers/applications/">the Discord
developer’s page</a> and press the &#8220;Create new application&#8221; button, as in
the image below. (I’ve already created two applications. If you haven’t,
you’ll only see the button that I’ve marked in red and not the two above
it.)</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://i.imgur.com/HHzbjJL.png" alt="Discord create application page"></span>
<strong>Image 2: Creating a new Discord application</strong></p>
</div>
<div class="paragraph">
<p>The first thing to do on the next page is to note your Client ID, which
you’ll need to add the bot to the server. You can come back later and
get if from this page, or copy it somewhere where you can easily find it
later.</p>
</div>
<div class="paragraph">
<p>Fill out a name and description for your bot (feel free to be more
creative than me) and press &#8220;save changes&#8221;.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://i.imgur.com/yznoduG.png" alt="Naming our Discord bot"></span> <strong>Image 3:
Naming our Discord Application</strong></p>
</div>
<div class="paragraph">
<p>Now you’ve created a Discord application. The next step is to add a bot
to this application, so head over to the &#8220;Bot&#8221; tab using the menu on
the left and press the &#8220;Add Bot&#8221; button, as indicated below. Click
&#8220;yes, do it&#8221; when Discord asks if you’re sure about bringing a new bot
to life.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://i.imgur.com/aFN3Lr0.png" alt="Adding a bot to our Discord application"></span> <strong>Image 4: Adding a bot to our Discord Application</strong></p>
</div>
<div class="paragraph">
<p>The last thing we’ll need from our bot is a Token. Anyone who has the
bot’s Token can prove that they own the bot, so you’ll need to be
careful not to share this with anyone. You can get the token by pressing
&#8220;Click to reveal token&#8221;, or copy it to your clipboard without seeing
it by pressing &#8220;Copy&#8221;.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://i.imgur.com/zZ1ctsg.png" alt="Getting a Token for your bot"></span>
<strong>Image 5: Generating a token for our Discord bot</strong></p>
</div>
<div class="paragraph">
<p>Take note of your Token or copy it to your clipboard, as we’ll need to
add it to our code soon.</p>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_discord_server">Creating a Discord server</h4>
<div class="paragraph">
<p>If you don’t have a Discord server to add your bot to, you can create
one by opening the desktop Discord application that you downloaded
earlier. Press the &#8220;+&#8221; icon as shown below to create a server.
<span class="image"><img src="https://i.imgur.com/jf5yLjh.png" alt="Creating a discord server"></span> <strong>Image
6: Creating a Discord server</strong></p>
</div>
<div class="paragraph">
<p>Press &#8220;Create a server&#8221; in the screen that follows, and then give your
server a name. Once the server is up and running, you can chat to
yourself, or invite some friends to chat with you. Soon we’ll invite our
bot to chat with us as well.</p>
</div>
</div>
<div class="sect3">
<h4 id="_adding_your_discord_bot_to_your_discord_server">Adding your Discord bot to your Discord server</h4>
<div class="paragraph">
<p>Our Discord bot is still just a shell at this stage as we haven’t
written any code to allow him to do anything, but let’s go ahead and add
him to our Discord server anyway. To add a bot to your server, you’ll
need the Client ID from the &#8220;General Information&#8221; page that we looked
at before (this is the one outlined in green in Image 3, <strong>not</strong> the Bot
Secret from Image 5).</p>
</div>
<div class="paragraph">
<p>Create a URL that looks as follows, but using your Client ID instead of
mine at the end:</p>
</div>
<div class="paragraph">
<p><a href="https://discordapp.com/api/oauth2/authorize?scope=bot&amp;client_id=477366174959665152" class="bare">https://discordapp.com/api/oauth2/authorize?scope=bot&amp;client_id=477366174959665152</a>.</p>
</div>
<div class="paragraph">
<p>Visit the URL that you created in your web browser and you’ll see a page
similar to the following where you can choose which server to add your
bot to.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://i.imgur.com/t0nlSKC.png" alt="Authorizing your bot to join your server"></span> <strong>Image 7: Authorizing our bot to join our server</strong></p>
</div>
<div class="paragraph">
<p>After pressing &#8220;authorize&#8221;, you should get an in-app Discord
notification telling you that your bot has joined your server.</p>
</div>
<div class="paragraph">
<p>Now we can get to the fun part of building a brain for our bot!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_repl_and_installing_our_discord_dependencies">Creating a Repl and installing our Discord dependencies</h3>
<div class="paragraph">
<p>The first thing we need to do is create a Node.js Repl to write the code
for our Discord bot. Over at <a href="https://repl.it">repl.it</a>, create a new
Repl, as you did right at the start of this tutorial, choosing
&#8220;Node.js&#8221; as your language again.</p>
</div>
<div class="paragraph">
<p>We don’t need to reinvent the wheel as there is already a great Node
wrapper for the Discord bot API called
<a href="https://discord.js.org/">discord.js</a>. Normally we would install this
third-party library through <a href="https://www.npmjs.com/">npm</a>, but because
we’re using Repl.it, we can skip the installation. Our Repl will
automatically pull in all dependencies.</p>
</div>
<div class="paragraph">
<p>In the default <code>index.js</code> file that is included with your new Repl,
add the following line of code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">const Discord = require('discord.js');</code></pre>
</div>
</div>
<div class="paragraph">
<p>Press the &#8220;Run&#8221; button and you should see Repl installing the Discord
library in the output pane on the right, as in the image below.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://i.imgur.com/7EexEVk.png" alt="installing Discord.js"></span> <strong>Image 8:</strong>
Installing Discord.js in our Repl.</p>
</div>
<div class="paragraph">
<p>Our bot is nearly ready to go – but we still need to plug in our secret
token. This will authorize our code to control our bot.</p>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_authorization_for_our_bot">Setting up authorization for our bot</h3>
<div class="paragraph">
<p>By default, Repl code is public. This is great as it encourages
collaboration and learning, but we need to be careful not to share our
secret bot token (which gives anyone who has access to it full control
of our bot).</p>
</div>
<div class="paragraph">
<p>To get around the problem of needing to give our <em>code</em> access to the
token while allowing others to access our code but <em>not</em> our token,
we’ll be using
<a href="https://www.digitalocean.com/community/tutorials/how-to-read-and-set-environmental-and-shell-variables-on-a-linux-vps">environment
variables</a>. On a normal machine, we’d set these directly on our
operating system, but using Repl we don’t have access to this. Repl
allows us to set secrets in environment variables through a special
<code>.env</code> file. Create a new file called exactly <code>.env</code> by using the
new file button in the left pane and add a variable to define your Bot’s
secret token (note that this is the second token that we got while
setting up the Bot – different from the Client ID that we used to add
our bot to our server). It should looks something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">DISCORD_BOT_SECRET=NDcUN5T32zcTjMYOM0Y1MTUy.Dk7JBw.ihrTSAO1GKHZSonqvuhtwta16WU</code></pre>
</div>
</div>
<div class="paragraph">
<p>You’ll need to: * <strong>Replace</strong> the token below (after the <code>=</code> sign) with
the token that Discord gave you when creating your own bot. * Be careful
about <strong>spacing</strong>. Unlike in Python, if you put a space on either side of
the <code>=</code> in your <code>.env</code> file, these spaces will be part of the
variable name or the value, so make sure you don’t have any spaces
around the <code>=</code> or at the end of the line. * Run the code again.
Sometimes you’ll need to refresh the whole page to make sure that your
environment variables are successfully loaded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">DISCORD_BOT_SECRET=NDcUN5T32zcTjMYOM0Y1MTUy.Dk7JBw.ihrTSAO1GKHZSonqvuhtwta16WU</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the image below you we’ve highlighted the &#8220;Add file&#8221; button, the
new file (<code>.env</code>) and how to deine the secret token for our bot’s use.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://i.imgur.com/Io372eV.png" alt="Creating our .env file"></span> <strong>Image 9:
Creating our .env file</strong></p>
</div>
<div class="paragraph">
<p>Let’s make a slightly Discord bot that repeats everything we say but in
reverse. We can do this in only a few lines of code. In your
<code>index.js</code> file, add the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">const Discord = require('discord.js');
const client = new Discord.Client();
const token = process.env.DISCORD_BOT_SECRET;

client.on('ready', () =&gt; {
  console.log("I'm in");
  console.log(client.user.username);
});

client.on('message', msg =&gt; {
    if (msg.author.id != client.user.id) {
        msg.channel.send(msg.content.split('').reverse().join(''));
    }
});

client.login(token);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let’s tear this apart line by line to see what it does.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Line 1</strong> is what we had earlier. This line both tells Repl to install
the third party library and brings it into this file so that we can use
it.</p>
</li>
<li>
<p>In <strong>line 2</strong>, we create a Discord <code>Client</code>. We’ll use this client to
send commands to the Discord <em>server</em> to control our bot and send it
commands.</p>
</li>
<li>
<p>In <strong>line 3</strong> we retrieve our secret token from the environment
variables (which Repl set from our <code>.env</code> file).</p>
</li>
<li>
<p>In <strong>line 5</strong>, we define an <code>event</code> for our client, which defines how
our bot should react to the &#8220;ready&#8221; event. The Discord bot is going to
run <em>asynchronously</em>, which might be a bit confusing if you’re used to
running standard synchronous code. We won’t go into asynchronous coding
in depth here, but if you’re interested in what this is and why it’s
used, there’s a good guide over at
<a href="https://blog.risingstack.com/node-hero-async-programming-in-node-js/">RisingStack</a>.
In short, instead of running the code in our file from top to bottom,
we’ll be running pieces of code in response to specific events.</p>
</li>
<li>
<p>In <strong>lines 6-8</strong> we define how our bot should respond to the &#8220;ready&#8221;
event, which is fired when our bot successfully joins a server. We
instruct our bot to output some information server side (i.e. this will
be displayed in our Repl’s output, but not sent as a message through to
Discord). We’ll print a simple <code>I'm in</code> message to see that the bot is
there and print our bot’s username (if you’re running multiple bots,
this will make it easier to work out who’s doing what).</p>
</li>
<li>
<p><strong>Lines 10-14</strong> are similar, but instead of responding to an &#8220;ready&#8221;
event, we tell our bot how to handle new messages. <strong>Line 11</strong> says we
only want to respond to messages that aren’t from us (otherwise our bot
will keep responding to himself – you can remove this line to see why
that’s a problem), and <strong>line 12</strong> says we’ll send a new message to the
same channel where we received a message (<code>msg.channel</code>) and the
content we’ll send will be the same message that we received, but
backwards. To reverse a string, we split it into its individual
characters, reverse the resulting array, and then join it all back into
a string again.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The last line fires up our bot and uses the token we loaded earlier to
log into Discord.</p>
</div>
<div class="paragraph">
<p>Press the big green &#8220;Run&#8221; button again and you should see your bot
reporting a successful channel join in the Repl output.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://i.imgur.com/DnSvWvY.png" alt="Repl output showing channel join"></span>
<strong>Image 10: Seeing our bot join our server</strong></p>
</div>
<div class="paragraph">
<p>Over in your Discord app, send a message and see your Bot respond!</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://i.imgur.com/Wu1ZU6F.png" alt="Messages from our bot"></span> <strong>Image 11:
Our bot can talk!</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="_keeping_our_bot_alive">Keeping our bot alive</h3>
<div class="paragraph">
<p>Your bot can now respond to messages, but only for as long as your Repl
is running. If you close your browser tab or shut down your computer,
your bot will stop and no longer respond to messages on Discord.</p>
</div>
<div class="paragraph">
<p>Repl will keep your code running after you close the browser tab only if
you are running a web server. Our bot doesn’t require an explicit web
server to run, but we can create a server and run it in the background
just to keep our Repl alive.</p>
</div>
<div class="paragraph">
<p>Create a new file in your project called <code>keep_alive.js</code> and add the
following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">var http = require('http');

http.createServer(function (req, res) {
  res.write("I'm alive");
  res.end();
}).listen(8080);</code></pre>
</div>
</div>
<div class="paragraph">
<p>We won’t go over this in detail as it’s not central to our bot, but here
we start a web server that will return &#8220;I’m alive&#8221; if anyone visits
it.</p>
</div>
<div class="paragraph">
<p>In our <code>index.js</code> file, we need to add a require statement for this
server at the top. Add the following line near the top of <code>index.js</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">const keep_alive = require('./keep_alive.js')</code></pre>
</div>
</div>
<div class="paragraph">
<p>After doing this and hitting the green &#8220;Run&#8221; button again, you should
see some changes to your Repl. For one, you’ll see a new pane in the top
right which shows the web output from your server. We can see that
visiting our Repl now returns a basic web page showing the &#8220;I’m alive&#8221;
string that we told our web server to return by default.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://i.imgur.com/zTHpTbK.png" alt="Running a Node server in the background"></span> <strong>Image 12</strong> Output from our Node server</p>
</div>
<div class="paragraph">
<p>Now your bot will stay alive even after closing your browser or shutting
down your development machine. Repl will still clean up your server and
kill your bot after about one hour of inactivity, so if you don’t use
your bot for a while, you’ll have to log into Repl and start the bot up
again. Alternatively, you can set up a third-party (free!) service like
<a href="https://uptimerobot.com/">Uptime Robot</a>. Uptime Robot pings your site
every 5 minutes to make sure it’s still working – usually to notify you
of unexpected downtime, but in this case the constant pings have the
side effect of keeping our Repl alive as it will never go more than an
hour without receiving any activity. Note that you need to select the
HTTP option instead of the Ping option when setting up Uptime Robot as
repl.it requires regular HTTP requests to keep your chatbot alive.</p>
</div>
</div>
<div class="sect2">
<h3 id="_forking_and_extending_our_basic_bot">Forking and extending our basic bot</h3>
<div class="paragraph">
<p>This is not a very useful bot as is, but the possibilities are only
limited by your creativity now! You can have your bot receive input from
a user, process the input, and respond in any way you choose. In fact,
with the basic input and output that we’ve demonstrated, we have most of
the components of any modern computer, all of which are based on the
<a href="https://en.wikipedia.org/wiki/Von_Neumann_architecture">Von Neumann
architecture</a> (we could easily add the missing memory by having our bot
write to a file, or with a bit more effort link in a
<a href="https://www.sqlite.org/index.html">SQLite database</a> for persistent
storage).</p>
</div>
<div class="paragraph">
<p>If you followed along this tutorial, you’ll have your own basic Repl bot
to play around with and extend. If you were simply reading, you can
easily fork my bot at <a href="https://repl.it/@GarethDwyer1/discord-bot-node" class="bare">https://repl.it/@GarethDwyer1/discord-bot-node</a> and
extend it how you want (you’ll need to add your own token and recreate
the <code>.env</code> file still). Happy hacking!</p>
</div>
<div class="paragraph">
<p>If you’re stuck for ideas, why not link up your Discord bot to the
<a href="https://dev.twitch.tv/">Twitch API</a> to get notified when your favourite
streamers are online, or build a
<a href="https://en.wikipedia.org/wiki/Interactive_fiction">text adventure</a>. Also
join Repl’s Discord server by using this invite link
<a href="https://discord.gg/QWFfGhy" class="bare">https://discord.gg/QWFfGhy</a> - you can test your bot, share it with other
bot builders to get feedback, and see what Discord bots people are
building on Repl.</p>
</div>
<div class="paragraph">
<p>If you enjoyed this tutorial, you might also enjoy my tutorial on
<a href="https://www.codementor.io/garethdwyer/building-a-telegram-bot-using-python-part-1-goi5fncay">building
a chatbot for Telegram</a> or my book
<a href="https://www.packtpub.com/web-development/flask-example">Flask by Example</a>
where I show how to build Python applications using the Flask framework.
If you have any questions or comments about this tutorial, feel free to
<a href="https://twitter.com/sixhobbits">reach out on Twitter</a>.</p>
</div>
</div>
</div>
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/monokai.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>